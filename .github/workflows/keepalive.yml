  name: keepalive

  on:
    schedule:
      - cron: '0 0 1 * *'
    workflow_dispatch:

  permissions:
    contents: write

  jobs:
    keepalive:
      runs-on: ubuntu-latest
      steps:
        - uses: actions/checkout@v4
        - name: Update keepalive file
          run: |
            date -u +"%Y-%m-%dT%H:%M:%SZ" > keepalive.txt
        - name: Commit if changed
          run: |
            git add keepalive.txt
            if git diff --cached --quiet; then
              echo "No changes"
            git config user.name "github-actions[bot]"
            git config user.email "github-actions[bot]@users.noreply.github.com"
            git commit -m "chore: monthly keepalive"
            git push
